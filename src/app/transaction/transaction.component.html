<style>
  input[type=search] {
 -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  height: 30px;
  border-radius: 0px;
  -webkit-box-shadow: inset 0 0px 0px rgba(0,0,0,0);
  box-shadow: inset 0 0px 0px rgba(0,0,0,0);
  -moz-box-shadow: none;
  border-style:solid;
  border: 1px solid #CCCCCC;
  font-size: 16px;
  width:100%
}
.form-group select::-ms-expand {
    display: none;
}
.form-group select {
 -webkit-appearance: none;
    -moz-appearance: none;
    -o-appearance: none;
    appearance: none;
 
  background-size: 20px;
  padding: 2px 21px 4px 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
      -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    text-indent: .01px;
    text-overflow: "";
}
.disable-span{
    color: #E6E6E6;
    cursor: not-allowed;
}
.transactionscrollscreensection.fix_table .bulkfilterContainer .titleBulkfilter {

font-size: 18px;
margin-top: -7px;
margin-bottom: 0px;
}
.transactionscrollscreensection.fix_table .bulkfilterContainer .radioContainer {
margin: 0px 0;
}
.transactionscrollscreensection.fix_table .showallprogress_container {
position: fixed;
top: 131px;
}
.showallprogress_container span{
  margin: 6px;
}
.bg_changer_fixed {

height: 222px;
}
.transactionscrollscreensection.fix_table .table_container_transaction thead.fixposi {
top: 168px;
margin: 6px; 
}

.transactionscrollscreensection.fix_table .table_container_transaction th.paddingchange {
  padding: 4px 12px !important;
}
.sselectstyle .fstElement {
  width: 100% ;
}
.sselectstyle .fstElement .fstToggleBtn{
  min-width: 100%;
  padding: 5px 10px;
  font-size: 15px;
}
.sselectstyle .fstElement .fstQueryInput{
  font-size: 15px;
  padding: 0px 10px;
  min-height: 30px;
  text-transform: capitalize;
}
</style>
<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="breadcrumbs"> <span class="mainbc">Transactions</span> <span style="color:#ccc">|</span> <span class="companynamebc">{{selectedCompName}}</span>
        <a href="javascript:void(0)" data-target="#switchCompany" data-toggle="modal" class="switchCompanyLink" rel="noreferrer noopener">Switch
          company</a> </div>
      <div class="BgTitle"> Adjust filters to sort and process your transactions </div>
      <div class="TransactionFilterTop">
        <div class="TransactionFilterHeader">
          <div class="col-xs-12">
            <div class="row">
              <div class="col-md-4">
                <div class="row">
                  <div class="col-xs-6">
                    <div class="form-group">
                      <label for="fromdate">Transaction From</label>
                      <input type="text" name="modiDate" readonly class="form-control clbg" id="fromdate" style="background-color: #fff !important; color: #000;">
                    </div>
                  </div>
                  <div class="col-xs-6">
                    <div class="form-group">
                      <label for="todate">Transaction To</label>
                      <input type="text" name="docDate" readonly class="form-control clbg" id="todate" style="background-color: #fff !important; color: #000;">
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div class="row">
                  <div class="col-md-5">
                    <div class="form-group">
                      <label for="selectVentorname">Vendor</label>
                      <select class="form-control" [(ngModel)]="selectedVendor">
                        <option value="" selected> All </option>
                        <option *ngFor="let vendor of trustedVendors" value="{{vendor.vendor_code}}">{{
                          vendor.vendor_code }}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-7 btn_top">
                    <div class="row button_box">
                      <div class="col-xs-12  cen_in_mobile">
                        <div class="row">
                          <div class="col-xs-4 col-md-4">
                            <div class="row text_center"> <a href="javascript:void(0)" class="normal-btn gray-btn blue-btn"
                                rel="noreferrer noopener" (click)="applyFilter(1)">Apply</a> </div>
                          </div>
                          <div class="col-xs-4 col-md-4">
                            <div class="row text_center"> <a href="javascript:void(0)" class="normal-btn Reset-btn blue-btn border_right_1 "
                                rel="noreferrer noopener" (click)="resetMinFilter()"><span>Reset</span></a> <em class="border_add_r"></em>
                            </div>
                          </div>
                          <div class="col-xs-4 col-md-4">
                            <div class="row text_center"> <a href="javascript:void(0)" class="normal-btn filterLink border_right_1"
                                (click)="openFilter()" rel="noreferrer noopener"><span>+</span> Filters</a> <em class="border_add_r"></em>
                            </div>
                          </div>
                          <!-- <div class="col-xs-6 col-md-3">
                            <div class="row text_center"> <a href="javascript:void(0)" data-toggle="modal" data-target="#ColumnsModal"
                                class="normal-btn filterLink border_right_1" rel="noreferrer noopener"><span>Columns</span></a>
                            </div>
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="TransactionFilterBody">
          <div class="col-xs-12">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="selectVentorname">Location</label>
                  <select class="form-control" id="location_filter">
                    <option value="" selected> All </option>
                    <option *ngFor="let location of locations" value="{{location.destination_address_id}}">{{
                      location.location_code }}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="selectVentorname">Cost Center</label>
                  <select class="form-control" id="cost_center">
                    <option value="" selected> All </option>
                    <option *ngFor="let costcenter of costCenter" value="{{costcenter.cost_center_id}}">{{costcenter.cost_center_name}}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="col-xs-12">
            <div class="row">
              <div class="col-md-4 sselectstyle">
                <label for="selectVentorname">Item</label>
                <!-- <input type="text" [(ngModel)]="filterByItem" class="form-control " id="itemcodefast"> -->
                <select class="singleSelect" id="itemcodefilter" [(ngModel)]="filterByItem">
                  <option value="" selected> Select One </option>
                  <option *ngFor="let tax of itemCodes" value="{{tax.item_id}}">{{tax.item_code}}</option>
               </select>
              </div>
              <div class="col-md-4">
                <div class="row">
                  <div class="col-xs-6">
                    <div class="form-group margintopchange sselectstyle">
                      <label for="selectVentorname">Tax Code</label>
                      <!-- <select class="form-control singleSelect" [(ngModel)]="filterByTaxCode">
                        <option value="" selected>Select One..</option>
                        <option *ngFor="let tax of taxCode" value="{{tax.tax_id}}">{{tax.tax_code}}</option>
                      </select> -->
                       <select class="singleSelect" id="taxcodefilter" [(ngModel)]="filterByTaxCode">
                          <option value="" selected> Select One </option>
                          <option *ngFor="let tax of taxCodeList" value="{{tax.taxcode}}">{{tax.taxcode}}</option>
                       </select>
                      
                      <!-- <option *ngFor="let vendor of taxCodeList" value="{{vendor.taxcode}}" [selected]="vendor.isfiltered == 'Y'">{{ vendor.taxcode }}</option> -->
                    </div>
                  </div>
                  <div class="col-xs-6">
                    <div class="form-group margintopchange">
                      <label for="selectVentorname">Purpose</label>
                      <select class="form-control" [(ngModel)]="filterByPurpose">
                        <option value="" selected>Select One..</option>
                        <option *ngFor="let purpose of purpose" value="{{purpose.purpose_id}}">{{purpose.purpose_desc}}</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="col-xs-12">
            <div class="row">
              <div class="col-md-4 ">
                <div class="row">
                  <div class="col-xs-6">
                    <div class="form-group">
                      <label for="selectVentorname">DOCUMENT Type</label>
                      <ng2-completer [(ngModel)]="filterByDocType" [datasource]="docTypeService" [minSearchLength]="0"></ng2-completer>
                    </div>
                  </div>
                  <div class="col-xs-6">
                    <div class="form-group">
                      <label for="selectVentorname">ACCRUAL METHOD</label>
                      <select class="form-control" [(ngModel)]="filterByAccural">
                        <!-- <option value=""  selected>Select One..</option> -->
                        <option value="DISTRIBUTED" selected>DISTRIBUTED</option>
                        <option value="EXCLUDE STATE">EXCLUDE STATE</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 ">
                <div class="row">
                  <div class="col-xs-6">
                    <div class="form-group">
                      <label for="selectVentorname">Min VARIANCE</label>
                      <input type="text" class="form-control " [(ngModel)]="filterByMinVariance">
                    </div>
                  </div>
                  <div class="col-xs-6">
                    <div class="form-group">
                      <label for="selectVentorname">Max VARIANCE</label>
                      <input type="text" class="form-control " [(ngModel)]="filterByMaxVariance">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="col-xs-12">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group margintopchange sselectstyle">
                  <label for="impot">Import File</label>
                  <!-- <input type="text" class="form-control " [(ngModel)]="filterByImportFilename" placeholder="Enter File Name.."> -->
                  <select class="singleSelect" id="filterByImportFilename" [(ngModel)]="filterByImportFilename">
                    <option value="" selected> Select One </option>
                    <option *ngFor="let tax of importFileNames" value="{{tax.filename}}">{{tax.filename}}</option>
                 </select>
                </div>
              </div>
              <div class="col-md-8">
                <div class="row">
                  <div class="col-md-5">
                    <div class="row">
                      <div class="col-xs-6">
                        <div class="form-group">
                          <label for="fromdate1">Imported From</label>
                          <input type="text" name="fromdate1" readonly class="form-control clbg" id="fromdate1" style="background-color: #fff !important; color: #000;">
                        </div>
                      </div>
                      <div class="col-xs-6">
                        <div class="form-group">
                          <label for="todate1">Imported To</label>
                          <input type="text" name="todate2" readonly class="form-control clbg" id="todate1" style="background-color: #fff !important; color: #000;">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12">
            <div class="row">
              <div class="col-md-4">
                <div class="form-group">
                  <label for="selectVentorname">Purchase Order number</label>
                  <select class="form-control" id="purchase_order" placeholder="Select One or More.." [(ngModel)]="filterPurOrd">
                    <option value="" selected>Select One..</option>
                    <option value=""> All </option>
                    <option *ngFor="let pur of purchaseorder" value="{{pur.purchasing_order_number}}">{{
                      pur.purchasing_order_number }}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="selectVentorname">Purchase Agent</label>
                  <select class="form-control" id="purchase_agent" placeholder="Select One or More.." [(ngModel)]="filterpurchaseagent">
                    <option value="" selected>Select One..</option>
                    <option value=""> All </option>
                    <option *ngFor="let pur of purchaseagent" value="{{pur.purchase_agent_id}}">{{pur.purchase_agent}}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-group">
                  <label for="selectVentorname">Revenue Account</label>
                  <select class="form-control" id="revenue_agent" placeholder="Select One or More.." [(ngModel)]="filterrevenuaccountid">
                    <option value="" selected>Select One..</option>
                    <option value=""> All </option>
                    <option *ngFor="let rev of revagent" value="{{rev.revenue_account_id}}">{{rev.revenue_account}}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
          <div class="col-xs-12">
            <div class="row">
              <div class="col-md-3">
                <div class="form-group">
                  <label for="selectVentorname">Custom Reference field1</label>
                  <select class="form-control" id="cus_ref" placeholder="Select One or More.." [(ngModel)]="filtercustomref1">
                    <option value="" selected>Select One..</option>
                    <option value=""> All </option>
                    <option *ngFor="let cus of custom1" value="{{cus.custom1_id}}">{{ cus.custom1 }}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-3">
                <div class="form-group">
                  <label for="selectVentorname">Custom Reference field2</label>
                  <select class="form-control" id="cus_ref2" placeholder="Select One or More.." [(ngModel)]="filtercustomref2">
                    <option value="" selected>Select One..</option>
                    <option value=""> All </option>
                    <option *ngFor="let cus of custom2" value="{{cus.custom2_id}}">{{cus.custom2}}</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6  button_box">
                <div class="row">
                  <div class="col-xs-4 col-md-4">
                    <div class="row text_center"> <a href="javascript:void(0)" class="normal-btn gray-btn blue-btn" rel="noreferrer noopener"
                        (click)="applyFilter(1)">Apply</a> </div>
                  </div>
                  <div class="col-xs-4 col-md-4">
                    <div class="row text_center"> <a href="javascript:void(0)" class="normal-btn blue-btn  Reset-btn"
                        rel="noreferrer noopener" (click)="resetMinFilter()"><span>Reset</span></a> <em class="border_add_r"></em>
                    </div>
                  </div>
                  <div class="col-xs-4 col-md-4">
                    <div class="row text_center"> <a href="javascript:void(0)" class="normal-btn filterLink" (click)="closeFilter()"
                        rel="noreferrer noopener"><span>-</span> Filters</a> <em class="border_add_r"></em> </div>
                  </div>
                  <!-- <div class="col-xs-6 col-md-3">
                    <div class="row text_center"> <a href="javascript:void(0)" class="normal-btn filterLink"
                        data-toggle="modal" data-target="#ColumnsModal" rel="noreferrer noopener"><span>Columns</span></a>
                    </div>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
    </div>
    <div class="clearfix"></div>
    <div class="col-xs-12">
      <div class="summeryTransactionContainer">
        <div class="col-xs-12">
          <div class="row">
            <div class="accordion-group">
              <div class="accordion-heading"> <a class="accordion-toggle collapsed" data-toggle="collapse" href="#collapsenormal"
                  rel="noreferrer noopener"> Tax and accrual summary </a> </div>
              <div id="collapsenormal" class="accordion-body collapse">
                <div class="accordion-inner">
                  <div class="col-xs-12">
                    <div class="row marginadjustment" style=" margin-bottom: 0;">
                      <div class="col-md-4 tandAhead"> Summary of filtered transactions </div>
                      <div class="col-md-8">
                        <table id="tabletransactionsummary">
                          <thead>
                            <tr class="table_header_border">
                              <th class="hidsts">STATUS</th>
                              <th class="txt_right">TAXABLE</th>
                              <th class="txt_right">CHARGED<br> TAX</th>
                              <th class="txt_right">CALCULATED<br> TAX</th>
                              <th class="txt_right">OVER<br> ACCRUAL</th>
                              <th class="txt_right">UNDER<br> ACCRUAL</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr class="spacer_trans_summary"></tr>
                            <tr class="table_transaction_bodyContents">
                              <td>Unresolved</td>
                              <td class="txt_right">{{taxAndsummary.Unresolved ? taxAndsummary.Unresolved.TAXABLE : 0}}</td>
                              <td class="txt_right">{{taxAndsummary.Unresolved ? taxAndsummary.Unresolved.CHARGEDTAX :
                                0}}</td>
                              <td class="txt_right">{{taxAndsummary.Unresolved ? taxAndsummary.Unresolved.CALCULATEDTAX
                                : 0}}</td>
                              <td class="txt_right greentexttd">{{taxAndsummary.Unresolved &&
                                taxAndsummary.Unresolved.OVERACCRUAL > 0 ? '+' + taxAndsummary.Unresolved.OVERACCRUAL :
                                0}}</td>
                              <td class="txt_right redtexttd">{{taxAndsummary.Unresolved &&
                                taxAndsummary.Unresolved.UNDERACCRUAL < 0 ? taxAndsummary.Unresolved.UNDERACCRUAL :
                                  0}}</td> </tr> </tbody> <tbody>
                            <tr class="spacer_trans_summary"></tr>
                            <tr class="table_transaction_bodyContents">
                              <td>Confirmed </td>
                              <td class="txt_right">{{taxAndsummary.Confirmed ? taxAndsummary.Confirmed.TAXABLE : 0}}</td>
                              <td class="txt_right">{{taxAndsummary.Confirmed ? taxAndsummary.Confirmed.CHARGEDTAX :
                                0}}</td>
                              <td class="txt_right">{{taxAndsummary.Confirmed ? taxAndsummary.Confirmed.CALCULATEDTAX :
                                0}}</td>
                              <td class="txt_right greentexttd">{{taxAndsummary.Confirmed &&
                                (taxAndsummary.Confirmed.OVERACCRUAL > 0) ? '+' + taxAndsummary.Confirmed.OVERACCRUAL :
                                0}}</td>
                              <td class="txt_right redtexttd">{{taxAndsummary.Confirmed &&
                                taxAndsummary.Confirmed.UNDERACCRUAL < 0 ? taxAndsummary.Confirmed.UNDERACCRUAL : 0}}</td>
                                  </tr> </tbody> <tbody>
                            <tr class="spacer_trans_summary"></tr>
                          </tbody>
                          <tbody>
                            <tr class="table_transaction_bodyContents">
                              <td>Committed </td>
                              <td class="txt_right">{{taxAndsummary.Committed ? taxAndsummary.Committed.TAXABLE : 0}}</td>
                              <td class="txt_right">{{taxAndsummary.Committed ? taxAndsummary.Committed.CHARGEDTAX :
                                0}}</td>
                              <td class="txt_right">{{taxAndsummary.Committed ? taxAndsummary.Committed.CALCULATEDTAX :
                                0}}</td>
                              <td class="txt_right greentexttd">{{taxAndsummary.Committed &&
                                taxAndsummary.Committed.OVERACCRUAL > 0 ? '+' + taxAndsummary.Committed.OVERACCRUAL :
                                0}}</td>
                              <td class="txt_right redtexttd">{{taxAndsummary.Committed &&
                                taxAndsummary.Committed.UNDERACCRUAL < 0 ? taxAndsummary.Committed.UNDERACCRUAL : 0}}</td>
                                  </tr> </tbody> <tbody>
                            <tr class="spacer_trans_summary"></tr>
                          </tbody>
                          <tbody>
                            <tr class="table_transaction_ReultContainer">
                              <td>Totals </td>
                              <td class="txt_right">{{taxAndsummary.Totals ? taxAndsummary.Totals.TAXABLE : 0}}</td>
                              <td class="txt_right">{{taxAndsummary.Totals ? taxAndsummary.Totals.CHARGEDTAX : 0}}</td>
                              <td class="txt_right">{{taxAndsummary.Totals ? taxAndsummary.Totals.CALCULATEDTAX : 0}}</td>
                              <td class="txt_right greentexttd">{{taxAndsummary.Totals &&
                                taxAndsummary.Totals.OVERACCRUAL > 0 ? '+' + taxAndsummary.Totals.OVERACCRUAL : 0}}</td>
                              <td class="txt_right redtexttd">{{taxAndsummary.Totals &&
                                taxAndsummary.Totals.UNDERACCRUAL < 0 ? taxAndsummary.Totals.UNDERACCRUAL : 0}}</td> </tr>
                                  </tbody> </table> </div> </div> </div> </div> </div> </div> </div> </div> </div> </div>
                                  <div class="clearfix">
                      </div>
                      <div class="col-xs-12">
                        <div class="separater"></div>
                      </div>
                      <div class="clearfix"></div>
                      <div class="bg_changer_fixed"></div>
                      <div class="transactionscrollscreensection" id="bulkSelection">
                        <div class="col-xs-12">
                          <div class="bulkfilterContainer">
                            <div class="titleBulkfilter"> Select transactions below to do one of the following in bulk
                            </div>
                            <div class="radioContainer">
                              <label class="radio-inline">
                                <input type="radio" name="optradio" checked="checked" [(ngModel)]="selectedBulkAction"
                                  value="Markforallocation">
                                <span class="icon-complete-and-sign"> </span> <span class="icono-con"> Mark for
                                  allocation</span> <em></em> <a href="javascript:void(0)" data-toggle="tooltip" title="Mark to allocate"
                                  class="tooltip-icon">oo</a> </label>
                              <label class="radio-inline">
                                <input type="radio" name="optradio" [(ngModel)]="selectedBulkAction" value="Allocate">
                                <span class="icon-diagram"> </span> <span class="icono-con"> Allocate </span> <em></em>
                                <a href="javascript:void(0)" data-toggle="tooltip" title="allocate" class="tooltip-icon">oo</a>
                              </label>
                              <label class="radio-inline">
                                <input type="radio" name="optradio" [(ngModel)]="selectedBulkAction" value="Calculate">
                                <span class="icon-sales-tax-calculator"> </span> <span class="icono-con"> Calculate
                                </span> <em></em> <a href="javascript:void(0)" data-toggle="tooltip" title="Calculate"
                                  class="tooltip-icon">oo</a> </label>
                              <label class="radio-inline">
                                <input type="radio" name="optradio" [(ngModel)]="selectedBulkAction" value="assignitemcodeortaxcode">
                                <span class="icon-edit"> </span> <span class="icono-con"> Assign item &/or tax code
                                </span> <em></em> <a href="javascript:void(0)" data-toggle="tooltip" title="Assign item &/or tax code"
                                  class="tooltip-icon">oo</a> </label>
                            </div>
                            <div class="radioContainer">
                              <label class="radio-inline">
                                <input type="radio" name="optradio" checked="checked" [(ngModel)]="selectedBulkAction"
                                  value="Confirmtransactios">
                                <span class="icon-complete"></span> <span class="icono-con"> Confirm transactions</span>
                                <em></em> <a href="javascript:void(0)" data-toggle="tooltip" title="Mark as complete"
                                  class="tooltip-icon">oo</a> </label>
                              <label class="radio-inline">
                                <input type="radio" name="optradio" [(ngModel)]="selectedBulkAction" value="Committoavatax">
                                <span class="icon-Product-experience"></span> <span class="icono-con"> Commit to AvaTax
                                </span> <em></em> <a href="javascript:void(0)" data-toggle="tooltip" title="Commit to AvaTax"
                                  class="tooltip-icon">oo</a> </label>
                              <label class="radio-inline">
                                <input type="radio" name="optradio" [(ngModel)]="selectedBulkAction" value="Export">
                                <span class="icon-download"></span> <span class="icono-con"> Export </span> <em></em>
                                <a href="javascript:void(0)" data-toggle="tooltip" title="Export" class="tooltip-icon">oo</a></label>
                              <label class="radio-inline">
                                <input type="radio" name="optradio" [(ngModel)]="selectedBulkAction" value="Delete">
                                <span class="icon-delete"></span> <span class="icono-con"> Delete </span> <em></em> <a
                                  href="javascript:void(0)" data-toggle="tooltip" title="Delete" class="tooltip-icon">oo</a></label>
                            </div>
                            <div class="clearfix"></div>
                            <div class="btn_container" style="margin: 5px 0 10px 0;">
                              <div class="col-md-4">
                                <div class="row button_box_secfilter">
                                  <div class="row">
                                    <div class="col-xs-4"> <a href="javascript:void(0)" class="normal-btn gray-btn blue-btn"
                                        data-toggle="modal" (click)="bulkapply()">Apply
                                        ({{this.selectedlineItems.length}})</a> </div>
                                    <div class="col-xs-4"> <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn">Reset</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="clearfix"></div>
                          </div>
                        </div>
                        <div class="col-xs-12">
                          <div class="separater"></div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="col-xs-12">
                          <div class="table_container_transaction" id="table_transaction_con">
                            <div class="showallprogress_container">
                              <span [ngClass]="{'textColored':GlobalfilterColoumn==''}" (click)="applyFilter(1, '')">All<em>
                                  {{transactions.summarydetails ? transactions.summarydetails.totalcount : '' }}</em></span>
                              <span [ngClass]="{'textColored':GlobalfilterColoumn=='RULEFAILED'}" (click)="applyFilter(1, 'RULEFAILED')">Errored
                                <em>{{transactions.summarydetails
                                  ?transactions.summarydetails.erroredcount: ''}} </em></span>
                              <span [ngClass]="{'textColored':GlobalfilterColoumn=='IMPANDCAL'}" (click)="applyFilter(1, 'IMPANDCAL')">Auto-processed
                                <em>{{transactions.summarydetails
                                  ?transactions.summarydetails.autoprocessedcount: ''}}</em></span>
                              <span [ngClass]="{'textColored':GlobalfilterColoumn=='MARFORREV'}" (click)="applyFilter(1, 'MARFORREV')">To
                                be reviewed <em>{{transactions.summarydetails
                                  ?transactions.summarydetails.tobereviewed: ''}}</em></span>
                              <span [ngClass]="{'textColored':GlobalfilterColoumn=='MARTOALLO'}" (click)="applyFilter(1, 'MARTOALLO')">To
                                be allocated <em>{{transactions.summarydetails
                                  ?transactions.summarydetails.tobeallocatedcount: ''}}</em></span>
                              <span [ngClass]="{'textColored':GlobalfilterColoumn=='AUTCON'}" (click)="applyFilter(1, 'AUTCON')">Confirmed
                                <em>{{transactions.summarydetails
                                  ?transactions.summarydetails.confirmedcount: ''}}</em></span>
                              <span [ngClass]="{'textColored':GlobalfilterColoumn=='AUTCOM'}" (click)="applyFilter(1, 'AUTCOM')">Committed
                                <em>{{transactions.summarydetails
                                  ?transactions.summarydetails.committed: ''}}</em></span>
                              <span [ngClass]="{'textColored':GlobalfilterColoumn=='UNRSLVD'}" class="removeborder"
                                (click)="applyFilter(1, 'UNRSLVD')">Unresolved <em>{{transactions.summarydetails
                                  ?transactions.summarydetails.unsolved: ''}}</em></span> </div>
                            <table id="tableTransaction">
                              <thead class="fixposi">
                                <tr>
                                  <th class="text_left">All
                                    <div class="inputContainerintabel">
                                      <input type="checkbox" name="tablecheck" class="selectall" (change)="selectAll()"
                                        [(ngModel)]="checkAll">
                                      <span class="checkmark"></span> </div>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('status_code')">sts<span
                                    class="icon-sort-down_arrow" *ngIf="selColumn !=='status_code'"></span><span
                                    class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='status_code'"></span><span
                                    class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='status_code'"></span></th>
                                  <th class="paddingchange text_left" (click)="sortData('vendor_desc')">vendor<span
                                      class="icon-sort-down_arrow" *ngIf="selColumn !=='vendor_desc'"></span><span
                                      class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='vendor_desc'"></span><span
                                      class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='vendor_desc'"></span></th>
                                  <th class="paddingchange text_left" (click)="sortData('doc_code')">doc <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='doc_code'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='doc_code'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='doc_code'"></span></th>
                                  <th class="paddingchange text_left" (click)="sortData('item_desc')">item <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='item_desc'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='item_desc'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='item_desc'"></span></th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('company') >= 0">
                                    <div (click)="openDynamicCol()">Company </div>
                                    <span (click)="sortData('company_name')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='company_name'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='company_name'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='company_name'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('location') >= 0">
                                    <div (click)="openDynamicCol()">Location </div>
                                    <span (click)="sortData('city')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='city'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='city'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='city'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('costcenters') >= 0">
                                    <div (click)="openDynamicCol()">Cost Centers </div>
                                    <span (click)="sortData('cost_center_name')"><span class="icon-sort-down_arrow"
                                        *ngIf="selColumn !=='cost_center_name'"></span><span class="icon-sort-down_arrow fillblue"
                                        *ngIf="sortOrder=='asc' && selColumn ==='cost_center_name'"></span><span class="icon-sort-up-arrow fillblue"
                                        *ngIf="sortOrder=='desc' && selColumn ==='cost_center_name'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('purpose') >= 0">
                                    <div (click)="openDynamicCol()">Purpose </div>
                                    <span (click)="sortData('purpose_desc')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='purpose_desc'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='purpose_desc'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='purpose_desc'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('custom1') >= 0">
                                    <div (click)="openDynamicCol()">Custom1 </div>
                                    <span (click)="sortData('custom1')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='custom1'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='custom1'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='custom1'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('custom2') >= 0">
                                    <div (click)="openDynamicCol()">Custom2 </div>
                                    <span (click)="sortData('custom2')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='custom2'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='custom2'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='custom2'"></span></span>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('taxable_amount')">taxable <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='taxable_amount'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='taxable_amount'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='taxable_amount'"></span></th>
                                  <th class="paddingchange" (click)="sortData('charged_tax')">
                                    <div>charged</div>
                                    Tax <span class="icon-sort-down_arrow" *ngIf="selColumn !=='charged_tax'"></span><span
                                      class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='charged_tax'"></span><span
                                      class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='charged_tax'"></span>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('calculated_tax')">
                                    <div>CALCULATED</div>
                                    Tax <span class="icon-sort-down_arrow" *ngIf="selColumn !=='calculated_tax'"></span><span
                                      class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='calculated_tax'"></span><span
                                      class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='calculated_tax'"></span>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('variance')">variance <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='variance'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='variance'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='variance'"></span></th>
                                  <th class="paddingchange" *ngIf="selDispColumn.indexOf('accural') >= 0">Accural </th>
                                  <th class="paddingchange" *ngIf="selDispColumn.indexOf('amount')  >= 0">Amount </th>
                                  <th class="paddingchange" *ngIf="selDispColumn.indexOf('docdate')  >= 0">Document
                                    Date </th>
                                  <th class="paddingchange text_left"> </th>
                                  <th class="paddingchange text_left"> </th>
                                </tr>
                              </thead>
                              <thead class="normalposi">
                                <tr>
                                  <th class="text_left">All
                                    <div class="inputContainerintabel">
                                      <input type="checkbox" name="tablecheck" class="selectall" (change)="selectAll()"
                                        [(ngModel)]="checkAll">
                                      <span class="checkmark"></span> </div>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('status_code')">sts<span
                                    class="icon-sort-down_arrow" *ngIf="selColumn !=='status_code'"></span><span
                                    class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='status_code'"></span><span
                                    class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='status_code'"></span></th>
                                  <th class="paddingchange text_left" (click)="sortData('vendor_desc')">vendor<span
                                      class="icon-sort-down_arrow" *ngIf="selColumn !=='vendor_desc'"></span><span
                                      class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='vendor_desc'"></span><span
                                      class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='vendor_desc'"></span></th>
                                  <th class="paddingchange text_left" (click)="sortData('doc_code')">doc <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='doc_code'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='doc_code'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='doc_code'"></span></th>
                                  <th class="paddingchange text_left" (click)="sortData('item_desc')">item <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='item_desc'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='item_desc'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='item_desc'"></span></th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('company') >= 0">
                                    <div (click)="openDynamicCol()">Company </div>
                                    <span (click)="sortData('company_name')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='company_name'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='company_name'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='company_name'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('location') >= 0">
                                    <div (click)="openDynamicCol()">Location </div>
                                    <span (click)="sortData('city')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='city'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='city'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='city'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('costcenters') >= 0">
                                    <div (click)="openDynamicCol()">Cost Centers </div>
                                    <span (click)="sortData('cost_center_name')"><span class="icon-sort-down_arrow"
                                        *ngIf="selColumn !=='cost_center_name'"></span><span class="icon-sort-down_arrow fillblue"
                                        *ngIf="sortOrder=='asc' && selColumn ==='cost_center_name'"></span><span class="icon-sort-up-arrow fillblue"
                                        *ngIf="sortOrder=='desc' && selColumn ==='cost_center_name'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('purpose') >= 0">
                                    <div (click)="openDynamicCol()">Purpose </div>
                                    <span (click)="sortData('purpose_desc')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='purpose_desc'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='purpose_desc'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='purpose_desc'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('custom1') >= 0">
                                    <div (click)="openDynamicCol()">Custom1 </div>
                                    <span (click)="sortData('custom1')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='custom1'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='custom1'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='custom1'"></span></span>
                                  </th>
                                  <th class="paddingchange text_left" *ngIf="selDynaColumn.indexOf('custom2') >= 0">
                                    <div (click)="openDynamicCol()">Custom2 </div>
                                    <span (click)="sortData('custom2')"><span class="icon-sort-down_arrow" *ngIf="selColumn !=='custom2'"></span><span
                                        class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='custom2'"></span><span
                                        class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='custom2'"></span></span>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('taxable_amount')">taxable <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='taxable_amount'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='taxable_amount'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='taxable_amount'"></span></th>
                                  <th class="paddingchange" (click)="sortData('charged_tax')">
                                    <div>charged</div>
                                    Tax <span class="icon-sort-down_arrow" *ngIf="selColumn !=='charged_tax'"></span><span
                                      class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='charged_tax'"></span><span
                                      class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='charged_tax'"></span>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('calculated_tax')">
                                    <div>CALCULATED</div>
                                    Tax <span class="icon-sort-down_arrow" *ngIf="selColumn !=='calculated_tax'"></span><span
                                      class="icon-sort-down_arrow fillblue" *ngIf="sortOrder=='asc' && selColumn ==='calculated_tax'"></span><span
                                      class="icon-sort-up-arrow fillblue" *ngIf="sortOrder=='desc' && selColumn ==='calculated_tax'"></span>
                                  </th>
                                  <th class="paddingchange" (click)="sortData('variance')">variance <span class="icon-sort-down_arrow"
                                      *ngIf="selColumn !=='variance'"></span><span class="icon-sort-down_arrow fillblue"
                                      *ngIf="sortOrder=='asc' && selColumn ==='variance'"></span><span class="icon-sort-up-arrow fillblue"
                                      *ngIf="sortOrder=='desc' && selColumn ==='variance'"></span></th>
                                  <th class="paddingchange" *ngIf="selDispColumn.indexOf('accural') >= 0">Accural </th>
                                  <th class="paddingchange" *ngIf="selDispColumn.indexOf('amount')  >= 0">Amount </th>
                                  <th class="paddingchange" *ngIf="selDispColumn.indexOf('docdate')  >= 0">Document
                                    Date </th>
                                  <th class="paddingchange text_left"> </th>
                                  <th class="paddingchange text_left"> </th>
                                </tr>
                              </thead>
                              <tbody *ngIf="transactions.itemlist.length == 0">
                                <tr>
                                  <td colspan="20" style="text-align:center">No
                                    records found.</td>
                                </tr>
                              </tbody>
                              <tbody id="{{item.doc}}{{item.cutlinenumber}}" *ngFor="let transindex = index;let item of transactions.itemlist  | paginate: { itemsPerPage: 20, currentPage: p, totalItems: total }"
                                [ngClass]="{'ErroredTable':item.itemstatus == 'CALCFAILED' || item.itemstatus == 'RULEFAILED','ReviewedTable':item.itemstatus == 'IMPANDCAL' || item.itemstatus == 'MARFORREV' || item.itemstatus == 'MARTOALLO' || item.itemstatus == 'ALLOCATED', 'ReviewedTable1':item.auditnote == 'Updated based on app request' && (item.itemstatus != 'IMPANDCAL' && item.itemstatus != 'MARFORREV' && item.itemstatus != 'MARTOALLO' && item.itemstatus != 'ALLOCATED')}">
                                <tr>
                                  <td>
                                    <div class="inputContainerintabel insideinputlabeltd">
                                      <input type="checkbox" name="tablecheck" class="singleSelect" [checked]="selectedlineItems.indexOf(item.lineitemid)>=0"
                                        (change)="selectItem(item.lineitemid)">
                                      <span class="checkmark"></span> </div>
                                  </td>
                                  <td><span [ngStyle]="{'color': item.itemstatus == 'ALLOCATED' ? 'blue' :''}" class="iconinsidetable opac8"
                                      [ngClass]="{'icon-sales-tax-calculator opac5':item.itemstatus == 'CALCFAILED' || item.itemstatus == 'CALCFAILED!', 'icon-sales-tax-calculator':item.itemstatus == 'IMPANDCAL' || item.itemstatus == 'IMPANDCAL!' , 'icon-settings':item.itemstatus == 'RULEFAILED' || item.itemstatus == 'RULEFAILED!', 'icon-edit':item.itemstatus == 'MARFORREV' || item.itemstatus == 'MARTOALLO!' , 'icon-diagram':item.itemstatus == 'MARTOALLO' || item.itemstatus == 'ALLOCATED' || item.itemstatus == 'MARTOALLO!' || item.itemstatus == 'ALLOCATED!', 'icon-autocon':item.itemstatus == 'AUTCON' || item.itemstatus == 'AUTCON!', 'icon-mancon':item.itemstatus == 'MANCON' || item.itemstatus == 'MANCON!', 'icon-Product-experience-autocom':item.itemstatus == 'AUTCOM' || item.itemstatus == 'AUTCOM!', 'icon-Product-experience colorgreen':item.itemstatus == 'MANCOM' || item.itemstatus == 'MANCOM!'}"></span></td>
                                  <td>{{item.vendor}}</td>
                                  <td>
                                    <div>{{item.documentdate | date:'MM/dd/yyyy'}}</div>
                                    <div>{{item.doc}}</div>
                                    <div class="fontsmall">Line {{item.lineitemnumber}}</div>
                                  </td>
                                  <td>
                                    <div class="fontsmall">{{item.itemdescription}}</div>
                                    <div>{{item.itemcode}}</div>
                                    <div>Qty {{item.quantity}}</div>
                                  </td>
                                  <td *ngIf="selDynaColumn.indexOf('company') >= 0">{{item.companyname}}</td>
                                  <td *ngIf="selDynaColumn.indexOf('location') >= 0">{{item.location}}</td>
                                  <td *ngIf="selDynaColumn.indexOf('costcenters') >= 0">{{item.costcenters}}</td>
                                  <td *ngIf="selDynaColumn.indexOf('purpose') >= 0">{{item.purpose}}</td>
                                  <td *ngIf="selDynaColumn.indexOf('custom1') >= 0">{{item.custom1}}</td>
                                  <td *ngIf="selDynaColumn.indexOf('custom2') >= 0">{{item.custom2}}</td>
                                  <td class="text_right" *ngIf="(item.modifiedfields.indexOf('TAXABLEAMOUNT') != -1); else elseBlock1">{{item.taxable}}&nbsp;&nbsp;<b><span style="font-size: x-large;">&#33;</span></b></td>
                                  <ng-template #elseBlock1>
                                    <td class="text_right">{{item.taxable}}</td>
                                  </ng-template>

                                  <td class="text_right" *ngIf="(item.modifiedfields.indexOf('CHARGEDTAX') != -1); else elseBlock2">{{item.charged_tax}}&nbsp;&nbsp;<b><span style="font-size: x-large;">&#33;</span></b></td>
                                  <ng-template #elseBlock2>
                                    <td class="text_right">{{item.charged_tax}}</td>
                                  </ng-template>
                                  <td class="text_right">{{item.caluculated_tax}}</td>
                                  <td class="text_right" [ngStyle]="{'color': (item.variance >= 0) ? 'green' :'red'}"
                                    *ngIf="(item.modifiedfields.indexOf('ACCURAL') != -1); else elseBlock3">{{item.variance}}&nbsp;&nbsp;<b><span style="font-size: x-large;">&#33;</span></b></td>
                                  <ng-template #elseBlock3>
                                    <td class="text_right" [ngStyle]="{'color': (item.variance >= 0) ? 'green' :'red'}">{{item.variance}}</td>
                                  </ng-template>
                                  <td class="text_right" *ngIf="selDispColumn.indexOf('accural') >= 0">{{item.accural}}</td>
                                  <td class="text_right" *ngIf="selDispColumn.indexOf('amount')  >= 0">{{item.amount}}</td>
                                  <td class="text_right" *ngIf="selDispColumn.indexOf('docdate')  >= 0">{{item.documentdate
                                    | date:'MM-dd-yyyy'}}</td>
                                  <td class="edit_ic">
                                    <span class="naviblueclr iconinsidetable icon-edit openEditContainer" (click)="openEdit(item)"
                                      *ngIf="editId != item.lineitemid"></span>
                                    <!-- <span class="naviblueclr iconinsidetable icon-edit openEditContainer"
                                      (click)="openEdit(item)" [ngClass]="{'disable-span':item.splitcount > 0}" *ngIf="editId != item.lineitemid"></span>  -->
                                    <span class="iconinsidetable icon-edit openEditContainerop" (click)="closeEdit()"
                                      *ngIf="editId == item.lineitemid" style="opacity: .5"></span></td>
                                  <td class="edit_ic"><span class="naviblueclr iconinsidetable icon-diagram openEditAllocationContainer"
                                      (click)="openSplit(item)" *ngIf="splitId != item.lineitemid"></span> <span class="iconinsidetable icon-diagram openEditAllocationContainerop"
                                      style="opacity: .5" (click)="closeSplit()" *ngIf="splitId == item.lineitemid"></span>&nbsp;&nbsp;{{item.splitcount}}</td>
                                </tr>
                                <tr *ngIf="item.itemstatus === 'CALCFAILED'">
                                  <td colspan="1"></td>
                                  <td colspan="3" class="maralign"> Calculation failed message </td>
                                  <td colspan="15"><a href="#!">Solution link</a></td>
                                </tr>
                                <tr *ngIf="item.itemstatus === 'RULEFAILED'">
                                  <td colspan="1"></td>
                                  <td colspan="3" class="maralign"> Rule failed message </td>
                                  <td colspan="15"><a href="#!">Solution link</a></td>
                                </tr>
                                <tr *ngIf="item.itemstatus === 'IMPANDCAL'">
                                  <td colspan="1"></td>
                                  <td colspan="3" class="maralign"> Imported and calculated </td>
                                  <td colspan="2"><a href="javascript:void(0)" (click)="confirmTrans(item)">Confirm
                                      transaction</a></td>
                                  <td colspan="15" ><a href="javascript:void(0)" (click)="commitToAva(item)" *ngIf="item.variance < 0">Commit to
                                      AvaTax</a></td>
                                </tr>
                                <tr *ngIf="item.itemstatus === 'ALLOCATED' || item.itemstatus === 'ALLOCATED!'">
                                  <td colspan="1"></td>
                                  <td colspan="3" class="maralign"> Allocated </td>
                                  <td colspan="15"><a href="javascript:void(0)" (click)="commitToAva(item)" *ngIf="item.variance < 0">Commit to
                                      AvaTax</a></td>
                                </tr>
                                <tr *ngIf="item.itemstatus === 'MARFORREV'">
                                  <td colspan="1"></td>
                                  <td colspan="3" class="maralign"> Marked for review </td>
                                  <td colspan="2"><a href="javascript:void(0)" (click)="openEdit(item)">Review
                                      transaction details</a></td>
                                  <td colspan="15"><a href="javascript:void(0)" (click)="openSplit(item)">Review
                                      allocation details</a></td>
                                </tr>
                                <tr *ngIf="item.itemstatus === 'MARTOALLO'">
                                  <td colspan="1"></td>
                                  <td colspan="3" class="maralign">Marked to allocate</td>
                                  <td colspan="2"><a href="javascript:void(0)" (click)="openSplit(item)">Allocate this
                                      transaction</a></td>
                                  <td colspan="15"></td>
                                </tr>
                                <tr class="editContainer" id="templateEdit" *ngIf="editId == item.lineitemid">
                                  <td colspan=20>
                                    <div class="col-xs-12">
                                      <div class="row">
                                        <div class="header_edit_con">
                                          <div class="col-md-3">
                                            <p class="edittitle">View and edit transaction details</p>
                                          </div>
                                          <div class="col-md-2">
                                            <div class="form-group">
                                              <label for="mrktoreview2">
                                                <input type="checkbox" name="mrktoreview2" [(ngModel)]="item.fulldetails[0].marked_for_review"
                                                  id="mrktoreview2"> <span class="edittext">Mark to review</span>
                                              </label>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-md-2">
                                          <div class="form-group">
                                            <label for="mrktoallocate2">
                                              <input type="checkbox" name="mrktoallocate2" id="mrktoallocate2"
                                                [(ngModel)]="item.fulldetails[0].marked_for_allocation"><span class="edittext">
                                                Mark to allocate</span></label>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Vendor name</label>
                                            <input type="text" class="form-control" name="VendorName" readonly
                                              [(ngModel)]="item.fulldetails[0].vendor_desc">
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Vendor code</label>
                                            <input type="text" class="form-control" name="VendorCode" readonly
                                              [(ngModel)]="item.fulldetails[0].avatax_vendor_id">
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Document Name</label>
                                            <input type="text" class="form-control" [(ngModel)]="item.documentname"
                                              name="documentName">
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-12">
                                          <div class="row">
                                            <div class="col-xs-2">
                                              <div class="form-group">
                                                <label for="fromdate2">Document date</label>
                                                <input type="text" name="editDocDate" readonly class="form-control"
                                                  value="{{item.documentdate | date:'MM-dd-yyyy'}}" id="fromdate2"
                                                  readonly>
                                              </div>
                                            </div>
                                            <div class="col-xs-2">
                                              <div class="form-group">
                                                <label for="fromdate3">Tax Calculation Date</label>
                                                <input type="text" name="editTransDate" class="form-control clbg" value="{{item.fulldetails[0].tax_calc_date | date:'MM-dd-yyyy'}}"
                                                  id="fromdate3">
                                              </div>
                                            </div>
                                            <div class="col-xs-2">
                                              <div class="form-group">
                                                <label for="todate2">Modified</label>
                                                <input type="text" name="editModDate" readonly class="form-control"
                                                  value="{{item.modifieddate | date:'MM-dd-yyyy'}}" id="todate2"
                                                  readonly>
                                              </div>
                                            </div>
                                            <div class="col-xs-2">
                                              <div class="form-group">
                                                <label>Document Type </label>
                                                <ng2-completer [(ngModel)]="item.documentype" [datasource]="docTypeService"
                                                  [minSearchLength]="0"></ng2-completer>
                                              </div>
                                            </div>
                                            <div class="col-xs-2">
                                              <div class="form-group">
                                                <label> Document Code </label>
                                                <input type="text" class="form-control" [(ngModel)]="item.doc" readonly
                                                  placeholder="Document Code">
                                              </div>
                                            </div>
                                            <div class="col-xs-2">
                                              <div class="form-group">
                                                <label> Line number </label>
                                                <input type="text" class="form-control" [(ngModel)]="item.cutlinenumber"
                                                  readonly placeholder="Line number">
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Item Code</label>
                                            <input type="text" class="form-control" [(ngModel)]="item.itemcode" name="ItemCode">
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Tax Code</label>
                                            <input type="text" class="form-control" [(ngModel)]="item.taxcode" name="TaxCode">
                                              
                                            <!-- <ng2-completer id="editedItemTaxCode" [(ngModel)]="item.taxcode"
                                              [datasource]="taxCodeService" [minSearchLength]="0"></ng2-completer> -->
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Item Description</label>
                                            <input type="text" class="form-control" [(ngModel)]="item.itemdescription"
                                              name="desc">
                                          </div>
                                        </div>
                                        <div class="col-md-4">
                                          <div class="form-group">
                                            <label>Accrual Method</label>
                                            <select class="form-control" [(ngModel)]="item.fulldetails[0].accrual_method">
                                              <option value="DISTRIBUTED" selected>DISTRIBUTED</option>
                                              <option value="EXCLUDE STATE">EXCLUDE STATE</option>
                                            </select>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-5">
                                          <div class="row">
                                            <div class="col-xs-4">
                                              <div class="form-group">
                                                <label>Quantity</label>
                                                <input type="number" class="form-control" (keyup)="AmountItemsEdited(item,'QUANTITY')"
                                                  [(ngModel)]="item.quantity" name="quantity" placeholder="1">
                                              </div>
                                            </div>
                                            <div class="col-xs-4">
                                              <label>Amount</label>
                                              <input type="number" class="form-control" (keyup)="AmountItemsEdited(item,'TOTALAMOUNT')"
                                                [(ngModel)]="item.amount" name="amount">
                                            </div>
                                            <div class="col-xs-4">
                                              <label>Non-taxable</label>
                                              <input type="number" class="form-control" [(ngModel)]="item.nontaxable"
                                                name="nontaxable">
                                            </div>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-2">
                                          <label>taxable</label>
                                          <input type="number" class="form-control" (keyup)="AmountItemsEdited(item,'TAXABLEAMOUNT')"
                                            [(ngModel)]="item.taxable" name="taxable">
                                        </div>
                                        <div class="col-md-6">
                                          <div class="row">
                                            <div class="col-xs-3">
                                              <label class="heightC">Charged Tax</label>
                                              <input type="number" class="form-control" (keyup)="AmountItemsEdited(item,'CHARGEDTAX')"
                                                [(ngModel)]="item.charged_tax" name="chargedtax">
                                            </div>
                                            <div class="col-xs-3">
                                              <label class="heightC">calculated tax</label>
                                              <input type="text" class="form-control" [(ngModel)]="item.caluculated_tax"
                                                readonly name="calculatedtax">
                                            </div>
                                            <div class="col-xs-3">
                                              <label class="heightC">variance</label>
                                              <input type="text" class="form-control" [(ngModel)]="item.variance"
                                                readonly name="variance">
                                            </div>
                                            <div class="col-xs-3">
                                              <label class="heightC">Accural</label>
                                              <input type="number" class="form-control" [(ngModel)]="item.fulldetails[0].accural_amount"
                                                name="accural" (input)="onInput($event)">
                                            </div>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-xs-12">
                                          <div class="accordion-group">
                                            <div class="accordion-heading">
                                              <a class="accordion-toggle collapsed" data-toggle="collapse" href="#collapse_randomIDMore{{item.lineitemid}}"
                                                rel="noreferrer noopener">
                                                Additional details
                                              </a>
                                            </div>
                                            <div id="collapse_randomIDMore{{item.lineitemid}}" class="accordion-body collapse">
                                              <div class="accordion-inner">
                                                <div class="col-md-11">
                                                  <div class="row">
                                                    <div class="col-xs-3">
                                                      <div class="form-group">
                                                        <label for="fromdate2">Company</label>
                                                        <select class="form-control" [(ngModel)]="item.fulldetails[0].company_id"
                                                          [attr.disabled]="item.splitcount > 0 ? true: null">
                                                          <option value="" selected> Select </option>
                                                          <option *ngFor="let company of companies.companylist" value="{{company.companyid}}">{{
                                                            company.companyname }}</option>
                                                        </select>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-3">
                                                      <div class="form-group">
                                                        <label for="todate2">LOCATION</label>
                                                        <select class="form-control" [(ngModel)]="SelectedLocationId"
                                                          [attr.disabled]="item.splitcount > 0 ? true: null">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let loca of locations" value="{{loca.destination_address_id}}">{{
                                                            loca.location_code }}</option>
                                                        </select>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-3">
                                                      <div class="form-group">
                                                        <label>COST CENTER </label>
                                                        <select class="form-control" [(ngModel)]="SelectedCostCenterId"
                                                          [attr.disabled]="item.splitcount > 0 ? true: null">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let costcenter of costCenter" value="{{costcenter.cost_center_id}}">{{costcenter.cost_center_name}}</option>
                                                        </select>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-2">
                                                      <div class="form-group">
                                                        <label> PURPOSE </label>
                                                        <select class="form-control" [(ngModel)]="SelectedPurposeId"
                                                          [attr.disabled]="item.splitcount > 0 ? true: null">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let purpose of purpose" value="{{purpose.purpose_id}}">{{purpose.purpose_desc}}</option>
                                                        </select>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <div class="col-md-11">
                                                  <div class="row">
                                                    <div class="col-xs-4">
                                                      <div class="form-group">
                                                        <label for="fromdate2">IMPORT FILE</label>
                                                        <input type="text" class="form-control" name="VendorName"
                                                          readonly value="{{item.fulldetails[0].import_filename}}">
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-4">
                                                      <div class="form-group">
                                                        <label for="todate2">IMPORT TYPE</label>
                                                        <input type="text" readonly value="{{item.fulldetails[0].template_name}}"
                                                          class="form-control" name="VendorName" readonly>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-4">
                                                      <div class="form-group">
                                                        <label>TRANSACTION COLLECTION DATE</label>
                                                        <input type="text" class="form-control" name="VendorName"
                                                          readonly value="{{item.fulldetails[0].imp_create_date| date:'MM-dd-yyyy'}}">
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <div class="col-md-11">
                                                  <div class="row">
                                                    <div class="col-xs-4">
                                                      <div class="form-group">
                                                        <label for="fromdate2">PURCHASE ORDER NUMBER</label>
                                                        <select class="form-control" [(ngModel)]="item.fulldetails[0].purchasing_order_number">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let pur of purchaseorderWithoutFil" value="{{pur.purchasing_order_number}}">{{
                                                            pur.purchasing_order_number }}</option>
                                                        </select>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-4">
                                                      <div class="form-group">
                                                        <label for="todate2">PURCHASING AGENT</label>
                                                        <select class="form-control" [(ngModel)]="item.fulldetails[0].purchase_agent_id">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let pur of purchaseagent" value="{{pur.purchase_agent_id}}">{{pur.purchase_agent}}</option>
                                                        </select>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-3">
                                                      <div class="form-group">
                                                        <label>REVENUE ACCOUNT</label>
                                                        <select class="form-control" [(ngModel)]="item.fulldetails[0].revenue_account_id">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let rev of revagent" value="{{rev.revenue_account_id}}">{{rev.revenue_account}}</option>
                                                        </select> </div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <div class="col-md-11">
                                                  <div class="row">
                                                    <div class="col-xs-5">
                                                      <div class="form-group">
                                                        <label for="fromdate2">CUSTOM REFERENCE FIELD1</label>
                                                        <select class="form-control" [(ngModel)]="SelectedCustomRef1">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let cus of custom1" value="{{cus.custom1_id}}">{{
                                                            cus.custom1 }}</option>
                                                        </select>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-5">
                                                      <div class="form-group">
                                                        <label for="todate2">CUSTOM REFERENCE FIELD2</label>
                                                        <select class="form-control" [(ngModel)]="SelectedCustomRef2">
                                                          <option value="0" selected>Select One..</option>
                                                          <option *ngFor="let cus of custom2" value="{{cus.custom2_id}}">{{cus.custom2}}</option>
                                                          <!-- <option *ngFor="let cus of custom2WithoutFil" value="{{cus.custom2_id}}" >{{cus.custom2}}</option> -->
                                                        </select>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12">
                                          <div class="accordion-group">
                                            <div class="accordion-heading">
                                              <a class="accordion-toggle collapsed" data-toggle="collapse" (click)="openHistory(item)"
                                                href="#collapse_randomIDedit{{item.lineitemid}}" rel="noreferrer noopener">
                                                History
                                              </a>
                                            </div>
                                            <div id="collapse_randomIDedit{{item.lineitemid}}" class="accordion-body collapse">
                                              <div class="accordion-inner">
                                                <table>
                                                  <tr>
                                                    <th class="text_left">VENDOR</th>
                                                    <th class="text_left">DOC</th>
                                                    <th class="text_left">ITEM</th>
                                                    <th class="text_left">COST CENTERS</th>
                                                    <th class="text_left">TAXABLE</th>
                                                    <th class="text_left">CHARGED TAX</th>
                                                    <th class="text_left">CALCULATED TAX</th>
                                                    <th class="text_left">VARIANCE</th>
                                                    <th class="text_left">AUDIT NOTE</th>
                                                    <th class="text_left">MODIFIED BY</th>
                                                    <th class="text_left">MODIFIED DATE</th>
                                                  </tr>
                                                  <tr *ngFor="let his of item.history?item.history.historydetails:[] ">
                                                    <td>{{his.vendorname}}</td>
                                                    <td>{{his.documentcode}}</td>
                                                    <td>{{his.description}}</td>
                                                    <td>{{his.costcenter}}</td>
                                                    <td>{{his.taxable}}</td>
                                                    <td>{{his.chargedtax}}</td>
                                                    <td>{{his.calculatedtax}}</td>
                                                    <td>{{his.variance}}</td>
                                                    <td>{{his.auditnote}}</td>
                                                    <td>{{his.modifiedby}}</td>
                                                    <td>{{his.modifieddate | date:'MM-dd-yyyy HH:mm:ss'}}</td>
                                                  </tr>
                                                  <tr *ngIf="!(item.history?item.history.historydetails.length:0)">
                                                    <td colspan="10" style="text-align:center">Records not found.</td>
                                                  </tr>
                                                </table>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="separater"></div>
                                        <div class="clearfix"></div>
                                        <div class="clearfix"></div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-3">
                                          <div class="form-group">
                                            <label style="margin-top: 10px;">Comments</label>
                                            <input type="text" class="form-control" name="audit_note" id="audit_note"
                                              style="margin-top: 5px;">
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-2">
                                          <div class="button_box_secfilter" style="margin:10px 0 0 0;">
                                            <div class="row">
                                              <div class="col-xs-6">
                                                <a href="javascript:void(0)" class="normal-btn gray-btn blue-btn"
                                                  data-toggle="modal" (click)="saveItem(item)" rel="noreferrer noopener">Save</a>
                                              </div>
                                              <div class="col-xs-6">
                                                <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn"
                                                  (click)="cancelItem(transindex)" rel="noreferrer noopener">Cancel</a>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                                <tr class="editallocatonContainer" id="editAllocation" *ngIf="splitId == item.lineitemid">
                                  <td colspan=20>
                                    <div class="col-xs-12">
                                      <div class="row">
                                        <div class="header_edit_con">
                                          <div class="col-md-3">
                                            <p class="edittitle">View and edit allocations</p>
                                          </div>
                                          <div class="col-md-2">
                                            <div class="form-group">
                                              <label for="mrktoreview3"><input type="checkbox" name="mrktoreview3"
                                                  [(ngModel)]="item.fulldetails[0].marked_for_review" id="mrktoreview3"><span
                                                  class="edittext"> Mark to review</span></label>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-md-2">
                                          <div class="form-group">
                                            <label for="mrktoallocate3">
                                              <!-- <input type="checkbox" name="mrktoallocate3" *ngFor="let itemName of item.allocations; let i = index" [(ngModel)]="itemName.marked_for_allocation" id="mrktoallocate3"><span
                                                class="edittext"> Mark to allocate</span></label> -->
                                              <input type="checkbox" name="mrktoallocate3" [(ngModel)]="item.fulldetails[0].marked_for_allocation"
                                                id="mrktoallocate3"><span class="edittext"> Mark to allocate</span></label>
                                          </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <div *ngFor="let allocation of item.allocations;index as i">
                                          <table id="table_inside" class="removebg">
                                            <thead>
                                              <tr>
                                                <th class="text_left">Company </th>
                                                <th class="text_left">Cost Center</th>
                                                <th class="text_left">Purpose</th>
                                                <th class="text_left"><span>Allocation</span></th>
                                                <th class="text_left"><span>Accrual Method</span></th>
                                                <th>Taxable</th>
                                                <th>
                                                  <div>charged</div>
                                                  Tax
                                                </th>
                                                <th>
                                                  <div>CALCULATED</div>
                                                  Tax
                                                </th>
                                                <th>variance </th>
                                                <th></th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr>
                                                <td>
                                                  <div class="col-xs-12">
                                                    <div class="row removerow">
                                                      <div class="form-group">
                                                        <label class="hidein_big">COMPANY</label>
                                                        <select class="form-control" [(ngModel)]="allocation.company_id">
                                                          <option value="" selected> Select </option>
                                                          <option *ngFor="let company of companies.companylist" value="{{company.companyid}}">{{
                                                            company.companyname }}</option>
                                                        </select>
                                                        <span style="color:red" *ngIf="!allocation.company_id && allocation.submit == true">Required</span>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </td>
                                                <td>
                                                  <div class="col-xs-12">
                                                    <div class="row removerow">
                                                      <div class="form-group">
                                                        <label class="hidein_big">Cost Center </label>
                                                        <select class="form-control" [(ngModel)]="allocation.cost_center_id">
                                                          <option value="" selected> Select </option>
                                                          <option *ngFor="let costcenter of costCenter" value="{{costcenter.cost_center_id}}">{{costcenter.cost_center_name}}</option>
                                                          <!-- <option *ngFor="let costcenter of costCenter.costcenterslist" value="{{costcenter.costcenterid}}" >{{costcenter.costcentername}}</option> -->
                                                        </select>
                                                        <!-- <span style="color:red" *ngIf="!allocation.cost_center_id && allocation.submit == true" >Required</span> -->
                                                      </div>
                                                    </div>
                                                  </div>
                                                </td>
                                                <td>
                                                  <div class="col-xs-12">
                                                    <div class="row removerow">
                                                      <div class="form-group">
                                                        <label class="hidein_big">Purpose </label>

                                                        <select class="form-control" [(ngModel)]="allocation.purpose_id">
                                                          <option value="" selected> Select </option>
                                                          <option *ngFor="let purpose of purpose" value="{{purpose.purpose_id}}">{{purpose.purpose_desc}}</option>
                                                        </select>
                                                        <!-- <span style="color:red" *ngIf="!allocation.purpose_id && allocation.submit == true" >Required</span> -->
                                                      </div>
                                                    </div>
                                                  </div>
                                                </td>
                                                <td>
                                                  <div class="col-xs-12">
                                                    <div class="form-group" style="min-width:80px"><input type="number"
                                                        name="allocation" class="wadjust" style="width:62px;border:1px solid #CCCCCC"
                                                        [ngStyle]="{'background-color': (i == 0) ? '#eee' :'white'}"
                                                        [readonly]="i == 0" [ngModel]="allocation.allocated_percentage"
                                                        min="0" max="100" (keyup)="onchangepercent($event, item, i)"><span
                                                        style="padding-left:3px">%</span></div>
                                                  </div>
                                                </td>
                                                <td>
                                                  <div class="col-xs-12">
                                                    <div class="form-group">
                                                      <select [(ngModel)]="allocation.accrual_method">
                                                        <option value="DISTRIBUTED" selected>DISTRIBUTED</option>
                                                        <option value="EXCLUDE STATE">EXCLUDE STATE</option>
                                                      </select>
                                                      <span style="color:red" *ngIf="!allocation.accrual_method && allocation.submit == true">Required</span>
                                                    </div>
                                                  </div>
                                                </td>
                                                <td class="text_right">
                                                  <div class="col-xs-12 paddingremove"><label class="hidein_big">Taxable</label>{{allocation.taxable_amount
                                                    | number: '1.2-2'}}</div>
                                                </td>
                                                <td class="text_right">
                                                  <div class="col-xs-12 paddingremove"><label class="hidein_big">
                                                      <div>charged</div> Tax
                                                    </label>{{allocation.charged_tax | number: '1.2-2'}}</div>
                                                </td>
                                                <td class="text_right">
                                                  <div class="col-xs-12 paddingremove"><label class="hidein_big">
                                                      <div>CALCULATED</div> Tax
                                                    </label>{{allocation.calculated_tax | number: '1.2-2'}}</div>
                                                </td>
                                                <td class="text_right">
                                                  <div class="col-xs-12 paddingremove"><label class="hidein_big">variance</label>{{allocation.variance
                                                    | number: '1.2-2'}}</div>
                                                </td>
                                                <td>
                                                  <div class="col-xs-12 iconinsidetable paddingremove">
                                                    <span class="icon-delete" style="font-size:20px;" (click)="askfordeleteallocation(i, item)"
                                                      *ngIf="(item.allocations.length === 1 && i === 0) || i > 0; else  elseDeleteblock"></span>
                                                    <ng-template #elseDeleteblock>
                                                      <span class="icon-delete" style="font-size:20px;color:lightgray;"></span>
                                                    </ng-template>
                                                    <!--<span class="icon-delete" style="font-size:20px;" (click)="askfordeleteallocation(i, item)"
                                                      *ngIf="(item.allocations.length === 1 && i === 0) || i > 0"></span> -->
                                                  </div>
                                                </td>
                                              </tr>
                                            </tbody>
                                          </table>
                                          <div class="clearfix"></div>
                                          <div class="col-xs-12 col-md-4">
                                            <div class="accordion-group marginchangeasmobile">
                                              <div class="accordion-heading">
                                                <a class="accordion-toggle collapsed" data-toggle="collapse" href="#collapse_randomID{{allocation.item_allocation_id}}{{i}}"
                                                  rel="noreferrer noopener">{{allocation.dest_city}},
                                                  {{allocation.dest_region}}</a>
                                              </div>
                                              <div id="collapse_randomID{{allocation.item_allocation_id}}{{i}}" class="accordion-body collapse">
                                                <div class="accordion-inner">
                                                  <div class="col-xs-12">
                                                    <div class="row">
                                                      <!-- <h2 class="companylocationHeading">Enter this company's Location</h2> -->
                                                      <div class="table_tab_container">
                                                        <ul class="nav nav-tabs">
                                                          <!-- <li class="active"><a data-toggle="tab" href="#code">Location
                                                              Address</a></li> -->
                                                        </ul>
                                                        <div class="tab-content">
                                                          <div id="code" class="tab-pane fade in active">
                                                            <div class="form-group">
                                                              <label>Location code</label>
                                                              <input type="text" name="Addressline1" class="form-control addmargin_new"
                                                                [(ngModel)]="allocation.dest_location_code">
                                                            </div>
                                                            <div class="form-group">
                                                              <label>Country</label>
                                                              <input type="text" name="country" class="form-control addmargin_new"
                                                                [(ngModel)]="allocation.dest_country">
                                                            </div>
                                                            <div class="form-group">
                                                              <label>Address</label>
                                                              <input type="text" name="Addressline1" class="form-control addmargin_new"
                                                                [(ngModel)]="allocation.dest_address">
                                                            </div>
                                                            <div class="col-xs-12 addmargin_new">
                                                              <div class="row">
                                                                <div class="col-xs-12 col-md-6">
                                                                  <div class="row mright0">
                                                                    <div class="form-group">
                                                                      <label>City</label>
                                                                      <input type="text" name="cityname" class="form-control"
                                                                        [(ngModel)]="allocation.dest_city"></div>
                                                                  </div>
                                                                </div>
                                                                <div class="col-xs-12 col-md-6">
                                                                  <div class="row">
                                                                    <div class="col-xs-4">
                                                                      <div class="row">
                                                                        <div class="form-group">
                                                                          <label>State</label>
                                                                          <input type="text" name="statename" class="form-control"
                                                                            [(ngModel)]="allocation.dest_region" style="padding: 3px;"></div>
                                                                      </div>
                                                                    </div>
                                                                    <div class="col-xs-8">
                                                                      <div class="row mleft0">
                                                                        <div class="form-group">
                                                                          <label>Zip Code</label>
                                                                          <input type="tel" name="Zipcode" class="form-control"
                                                                            [(ngModel)]="allocation.dest_postal_code"></div>
                                                                      </div>
                                                                    </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                          <div id="address" class="tab-pane fade in">
                                                            <div class="form-group">
                                                              <label>Location Code</label>
                                                              <input type="text" name="Addressline2" class="form-control addmargin_new">
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-md-3">
                                            <div class="form-group">
                                              <ng2-completer id="allocation.item_allocation_id" [datasource]="dataService"
                                                [minSearchLength]="0" (selected)="onItemSelect($event, allocation)"></ng2-completer>
                                            </div>
                                          </div>
                                          <div class="clearfix"></div>
                                        </div>
                                        <div class="separater"></div>
                                        <div class="newAddContaine"><a href="javascript:void(0)" (click)="addAnother(item)">
                                            <span class="glyphicon glyphicon-plus"></span> Add another</a></div>
                                        <div class="separater"></div>
                                        <div class="clearfix"></div>
                                        <div class="col-md-2">
                                          <div class="button_box_secfilter" style="margin:10px 0 0 0;">
                                            <div class="row">
                                              <div class="col-xs-6">
                                                <a href="javascript:void(0)" class="normal-btn gray-btn blue-btn"
                                                  data-toggle="modal" (click)="allocateItem(item)" data-target="#" rel="noreferrer noopener">Save</a>
                                              </div>
                                              <div class="col-xs-6">
                                                <a href="javascript:void(0)" (click)="cancelAllocItem(transindex)"
                                                  class="normal-btn blue-btn Reset-btn" rel="noreferrer noopener">Cancel</a></div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <div class="has-text-centered">
                              <pagination-controls (pageChange)="getPage($event)"></pagination-controls>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div style="position: fixed;width:60%;top:40%;left: 45%;opacity: 1;z-index: 500000;" *ngIf="loader">
                        <img src="assets/images/orange_circles.gif" style="margin-bottom: 20px;width:10%"><br>
                      </div>
                    </div>
                  </div>
                  <!--  Modal Starts -->
                  <div id="deleteModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <div style="float:left;width: 32px;padding: 10px 0;"><span class="icon-delete" style="float:none;"></span></div>
                          <div style="float:left">
                            <h4 class="modal-title" style="padding: 7px 0;"><span>Are you sure you want to delete these
                                transactions?</span></h4>
                          </div>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label class="popuplabel">comments</label>
                            <textarea style="width:100%;height:100px" id="deleteComments"></textarea>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="okDel()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn"
                                      rel="noreferrer noopener" data-dismiss="modal">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->
                  <!--  Modal Starts -->
                  <div id="markAllocationModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <div style="float:left;width: 32px;">
                            <!-- <span class="icon-delete" ></span> -->
                          </div>
                          <div>
                            <h4 class="modal-title" style="padding: 10px 0;"><span class="icon-complete-and-sign">
                              </span><span>Are you sure you want to mark these transactions for allocation?</span></h4>
                          </div>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label class="popuplabel">comments</label>
                            <textarea style="width:100%;height:100px" id="markallocateComments"></textarea>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="markAllocate()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn"
                                      rel="noreferrer noopener" data-dismiss="modal">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->
                  <!--  Modal Starts -->
                  <div id="calculateModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <div style="float:left;width: 32px;">
                            <!-- <span class="icon-delete" ></span> -->
                          </div>
                          <div>
                            <h4 class="modal-title" style="padding: 10px 0;"><span class="icon-sales-tax-calculator">
                              </span><span>Are you sure you want to calculate these transactions ?</span></h4>
                          </div>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label class="popuplabel">comments</label>
                            <textarea style="width:100%;height:100px" id="calculateComments"></textarea>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="calculate()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn"
                                      rel="noreferrer noopener" data-dismiss="modal">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->
                  <!--  Modal Starts -->
                  <div id="confirmtransactionModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <div style="float:left;width: 32px;">
                            <!-- <span class="icon-delete" ></span> -->
                          </div>
                          <div>
                            <h4 class="modal-title" style="padding: 10px 0;"><span class="icon-complete"> </span><span>Are
                                you sure you want to confirm these transactions ?</span></h4>
                          </div>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label class="popuplabel">comments</label>
                            <textarea style="width:100%;height:100px" id="confirmtransComments"></textarea>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="confirmTransaction()"
                                      class="normal-btn gray-btn blue-btn" rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn"
                                      rel="noreferrer noopener" data-dismiss="modal">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->
                  <!--  Modal Starts -->
                  <div id="CommittoavataxModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <div style="float:left;width: 32px;">
                            <!-- <span class="icon-delete" ></span> -->
                          </div>
                          <div>
                            <h4 class="modal-title" style="padding: 10px 0;"><span class="icon-Product-experience">
                              </span><span>Are you sure you want to commit these transactions to Avatax?</span></h4>
                          </div>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label class="popuplabel">comments</label>
                            <textarea style="width:100%;height:100px" id="CommittoavataxComments"></textarea>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="Committoavatax()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn"
                                      rel="noreferrer noopener" data-dismiss="modal">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->

                  <!--  Modal Starts -->
                  <div id="allocationModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <div style="float:left;width: 32px;"><span class="icon-delete"></span></div>
                          <div>
                            <h4 class="modal-title" style="padding: 10px 0;"><span>Are you sure you want to allocate
                                these transactions?</span></h4>
                          </div>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label class="popuplabel">comments</label>
                            <textarea style="width:100%;height:100px" id="allocateComments"></textarea>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="okDoBulkAllocate()"
                                      class="normal-btn gray-btn blue-btn" rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="cancelDoBulkAllocate()"
                                      class="normal-btn blue-btn Reset-btn" rel="noreferrer noopener" data-dismiss="modal">Cancel</a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->

                  <!-- Column Modal Starts -->
                  <div id="ColumnsModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span>Columns to show </span></h4>
                        </div>
                        <div class="modal-body" style="min-height:300px">
                          <div class="columnsubheadpop"> This column can be customized to show the information you need
                          </div>
                          <div class="form-group">
                            <label class="popuplabel">Column</label>
                            <select class="form-control widthadjust selectpicker" multiple data-live-search="true" id="selDispColumn">
                              <option value="accural" [selected]="selDispColumn.indexOf('accural') >= 0">Accural</option>
                              <option value="amount" [selected]="selDispColumn.indexOf('amount')  >= 0">Amount</option>
                              <option value="docdate" [selected]="selDispColumn.indexOf('docdate')  >= 0">Document Date</option>
                            </select>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="saveSel()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="cancelSel()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->
                  <!-- Column Modal Starts -->
                  <div id="dynamicColumnsModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span>Columns to show </span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="columnsubheadpop"> This column can be customized to show the information you need
                          </div>
                          <div class="form-group">
                            <label class="popuplabel">Column</label>
                            <select class="form-control widthadjust selectpicker" data-live-search="true" id="selDynaColumn">
                              <option value="company" [selected]="selDynaColumn.indexOf('company') >= 0">Company</option>
                              <option value="location" [selected]="selDynaColumn.indexOf('location')  >= 0">Location</option>
                              <option value="costcenters" [selected]="selDynaColumn.indexOf('costcenters')  >= 0">Cost
                                Centers</option>
                              <option value="purpose" [selected]="selDynaColumn.indexOf('purpose')  >= 0">Purpose</option>
                              <option value="custom1" [selected]="selDynaColumn.indexOf('custom1')  >= 0">Custom1</option>
                              <option value="custom2" [selected]="selDynaColumn.indexOf('custom2')  >= 0">Custom2</option>
                            </select>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="saveDynamicCol()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="cancelDynaSel()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->
                  <!-- assign item/tax code Starts -->
                  <div id="assignitemtax" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span>Select Tax and/or Item codes to assign to the selected
                              transactions </span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group margintopchange sselectstyle" style="min-width:230px" >
                            <label class="popuplabel">Tax Code</label>
                            <!-- <ng2-completer id="taxcodeforupdateitem" [(ngModel)]="taxcodeforupdateitem" [datasource]="taxCodeService"
                              [minSearchLength]="0"></ng2-completer> -->
                              <select class="singleSelect" id="taxcodeforupdateitem" [(ngModel)]="taxcodeforupdateitem">
                                <option value="" selected> Select One </option>
                                <option *ngFor="let tax of taxCodeList" value="{{tax.taxcode}}">{{tax.taxcode}}</option>
                             </select>
                          </div>
                          <div class="clearfix"></div>
                          <div class="form-group margintopchange sselectstyle" style="min-width:230px" >
                            <label class="popuplabel">Item Code</label>
                            <!-- <input type="text" [(ngModel)]="itemcodeforupdateitem" style="width:100%" /> -->
                            <select class="singleSelect" id="itemcodeforupdateitem" [(ngModel)]="itemcodeforupdateitem">
                              <option value="" selected> Select One </option>
                              <option *ngFor="let tax of itemCodes" value="{{tax.item_code}}">{{tax.item_code}}</option>
                           </select>
                          </div>
                          <div class="clearfix"></div>
                          <div class="form-group">
                            <label class="popuplabel">Comments</label>
                            <textarea [(ngModel)]="commentsupdateItem" style="width:100%"></textarea>
                          </div>
                          <div class="clearfix"></div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="saveInfo()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- assign item/tax code Starts -->
                  <!-- Delete Transaction Modal Start--->
                  <div id="deletetransactionmodal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-delete"></span><span>Are you sure you want to
                              delete these transactions?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Delete Transaction Modal End--->
                  <!-- Commit Transaction Modal Start--->
                  <div id="committransactionmodal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-Product-experience"></span><span>Are you sure you
                              want to commit these transactions to AvaTax?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Commit Transaction Modal End--->
                  <!-- Mark As Complete Transaction Modal Start--->
                  <div id="markascompletemodal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-complete"></span><span>Are you sure you want to
                              mark these transactions as complete?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Mark As Complete Transaction Modal End--->
                  <!-- Calculate Transaction Modal Start--->
                  <div id="calculatetransactionmodal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-sales-tax-calculator"></span><span>Are you sure you
                              want to calculate these transactions?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Calculate Transaction Modal End--->
                  <!-- Mark As Allocate Transaction Modal Start--->
                  <div id="markasallocatemodal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-complete-and-sign"></span><span>Are you sure you
                              want to mark these transactions to allocate?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Mark As Complete Allocate Modal End--->
                  <!-- Save Allocation Transaction Modal Start--->
                  <div id="saveallocatemodal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-diagram"></span><span>Are you sure you want to save
                              the allocations for these transactions?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Save Allocation Transaction Modal End--->
                  <!-- Row Level Save Allocation Transaction Modal Start--->
                  <div id="saveallocatemodalrow" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-diagram"></span><span>Are you sure you want to save
                              the allocations for this transaction?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Row Level Save Allocation Transaction Modal End--->
                  <!-- Row Level Save Transaction  Modal Start--->
                  <div id="savetransactionmodalrow" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="iconinsidetable icon-edit"></span><span>Are you sure you
                              want to save your updates to these transaction details?</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label for="comments">Comments</label>
                            <input type="text" class="form-control">
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Ok</a> <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Row Level Save Allocation Transaction Modal End--->
                  <!-- Define Allocation  Modal Start--->
                  <div id="defineallocationmodal" class="modal fade definemodal" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="clearfix"></div>
                        <div class="modal-body">
                          <div class="col-xs-12">
                            <div class="row">
                              <div class="col-md-6">
                                <p class="definep">Define the allocations for your selected transactions </p>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label for="mrktoreview">
                                    <input type="checkbox" name="mrktoreview" id="mrktoreview">
                                    Mark to review </label>
                                </div>
                              </div>
                              <div class="clearfix"></div>
                              <div class="col-md-3">
                                <div class="form-group">
                                  <label>Allocation Method</label>
                                  <select class="form-control">
                                    <option>Percentage</option>
                                  </select>
                                </div>
                              </div>
                              <div class="col-md-12 modaltable">
                                <table id="table_inside_city">
                                  <tr>
                                    <th>Company & Location</th>
                                    <th>Cost Center</th>
                                    <th>Purpose</th>
                                    <th class="txtalignr" style="padding: 10px 15px;">Allocation &<br>
                                      Accrual Method</th>
                                    <th class="txtalignr">Taxable</th>
                                    <th class="txtalignr">
                                      <div>charged</div>
                                      Tax
                                    </th>
                                    <th class="txtalignr">
                                      <div>CALCULATED</div>
                                      Tax
                                    </th>
                                    <th class="txtalignr">variance </th>
                                    <th class="txtalignr"></th>
                                  </tr>
                                  <tr>
                                    <td>
                                      <div class="form-group">
                                        <select class="form-control">
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                        </select>
                                      </div>
                                    </td>
                                    <td>
                                      <div class="form-group">
                                        <select class="form-control">
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                        </select>
                                      </div>
                                    </td>
                                    <td>
                                      <div class="form-group">
                                        <select class="form-control">
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                          <option>lorem ipsum</option>
                                        </select>
                                      </div>
                                    </td>
                                    <td>
                                      <div class="form-group" style="height: 28px;">
                                        <input type="text" name="lablename" class="wadjust form-control">
                                      </div>
                                    </td>
                                    <td class="txtalignr">-</td>
                                    <td class="txtalignr">-</td>
                                    <td class="txtalignr">-</td>
                                    <td class="txtalignr">-</td>
                                    <td class="txtalignr">
                                      <div class="iconinsidetable"> <span class="icon-delete"></span> </div>
                                    </td>
                                  </tr>
                                </table>
                              </div>
                              <div class="clearfix"></div>
                              <div class="col-xs-12 col-md-4">
                                <div class="accordion-group cityacc">
                                  <div class="accordion-heading"> <a class="accordion-toggle collapsed" data-toggle="collapse"
                                      href="#collapse_2"> City Name Here ST </a> </div>
                                  <div id="collapse_2" class="accordion-body collapse">
                                    <div class="accordion-inner">
                                      <div class="col-xs-12">
                                        <div class="row">
                                          <h2 class="companylocationHeading">Enter this company's Location</h2>
                                          <div class="table_tab_container">
                                            <ul class="nav nav-tabs">
                                              <li class="active"><a data-toggle="tab" href="#code1" rel="noreferrer noopener">Location
                                                  Address</a></li>
                                              <li><a data-toggle="tab" href="#address1" rel="noreferrer noopener">Location
                                                  code</a></li>
                                            </ul>
                                            <div class="tab-content">
                                              <div id="code1" class="tab-pane fade in active">
                                                <div class="form-group">
                                                  <label class="adjustmargin_new">Country</label>
                                                  <select class="form-control">
                                                    <option>United States</option>
                                                    <option>Country name</option>
                                                    <option>Country name 1</option>
                                                    <option>Country name 2</option>
                                                  </select>
                                                </div>
                                                <div class="form-group">
                                                  <label>Address</label>
                                                  <input type="text" name="Addressline1" class="form-control addmargin_new">
                                                  <input type="text" name="Addressline2" class="form-control addmargin_new">
                                                </div>
                                                <div class="col-xs-12 addmargin_new">
                                                  <div class="row">
                                                    <div class="col-xs-12 col-md-6">
                                                      <div class="row mright0">
                                                        <div class="form-group">
                                                          <label>City</label>
                                                          <input type="text" name="cityname" class="form-control">
                                                        </div>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-12 col-md-6">
                                                      <div class="row">
                                                        <div class="col-xs-4">
                                                          <div class="row">
                                                            <div class="form-group">
                                                              <label>State</label>
                                                              <input type="text" name="statename" class="form-control"
                                                                style="padding: 3px;">
                                                            </div>
                                                          </div>
                                                        </div>
                                                        <div class="col-xs-8">
                                                          <div class="row mleft0">
                                                            <div class="form-group">
                                                              <label>Zip Code</label>
                                                              <input type="tel" name="Zipcode" class="form-control">
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                              <div id="address1" class="tab-pane fade">
                                                <div class="form-group">
                                                  <label>Country</label>
                                                  <select class="form-control">
                                                    <option>United States</option>
                                                    <option>Country name</option>
                                                    <option>Country name 1</option>
                                                    <option>Country name 2</option>
                                                  </select>
                                                </div>
                                                <div class="form-group">
                                                  <label>Address</label>
                                                  <input type="text" name="Addressline1" class="form-control addmargin_new">
                                                  <input type="text" name="Addressline2" class="form-control addmargin_new">
                                                </div>
                                                <div class="col-xs-12 addmargin_new">
                                                  <div class="row">
                                                    <div class="col-xs-12 col-md-6">
                                                      <div class="row mright0">
                                                        <div class="form-group">
                                                          <label>City</label>
                                                          <input type="text" name="cityname" class="form-control">
                                                        </div>
                                                      </div>
                                                    </div>
                                                    <div class="col-xs-12 col-md-6">
                                                      <div class="row">
                                                        <div class="col-xs-4">
                                                          <div class="row">
                                                            <div class="form-group">
                                                              <label>State</label>
                                                              <input type="text" name="statename" class="form-control"
                                                                style="padding: 3px;">
                                                            </div>
                                                          </div>
                                                        </div>
                                                        <div class="col-xs-8">
                                                          <div class="row mleft0">
                                                            <div class="form-group">
                                                              <label>Zip Code</label>
                                                              <input type="tel" name="Zipcode" class="form-control">
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xs-12 col-md-3">
                                <div class="form-group">
                                  <select class="form-control">
                                    <option>lorem ipsum</option>
                                    <option>lorem ipsum</option>
                                    <option>lorem ipsum</option>
                                    <option>lorem ipsum</option>
                                  </select>
                                </div>
                              </div>
                              <div class="clearfix"></div>
                              <div class="col-xs-12">
                                <p class="addcity"> <a href="javascript:void(0)" rel="noreferrer noopener"> <span class="icon-add"
                                      style="font-size: 110%;color: #2b769b;"></span><span>Add Another</span> </a> </p>
                              </div>
                              <div class="col-xs-12">
                                <div class="citycollec"> </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="modal-footer">
                          <div class="col-xs-12">
                            <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn gray-btn blue-btn"
                                data-dismiss="modal" rel="noreferrer noopener">Save</a> <a href="javascript:void(0)"
                                class="normal-btn blue-btn cancel-btn" data-dismiss="modal">Cancel</a> </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Row Level Save Allocation Transaction Modal End--->
                  <!-- Define Allocation  Modal Start--->
                  <div id="defineallocationmodal1" class="modal fade definemodal" role="dialog">
                    <div class="modal-dialog">
                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="clearfix"></div>
                        <div class="modal-body">
                          <div class="col-xs-12">
                            <div class="row">
                              <div class="col-md-6">
                                <p class="definep">Define the allocations for your selected transactions </p>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label for="mrktoreview1">
                                    <input type="checkbox" name="mrktoreview1" id="mrktoreview1">
                                    Mark to review </label>
                                </div>
                              </div>
                              <div class="clearfix"></div>
                              <div *ngFor="let bulkinfo of bulkAllocation;index as i">
                                <div class="col-md-12 modaltable">
                                  <table id="table_inside_city1">
                                    <tr>
                                      <th>Company</th>
                                      <th>Cost Center</th>
                                      <th>Purpose</th>
                                      <th>Percentage</th>
                                      <th class="txtalignr" style="padding: 10px 15px;">Accrual Method</th>
                                      <th class="txtalignr">Taxable</th>
                                      <th class="txtalignr">
                                        <div>charged</div>
                                        Tax
                                      </th>
                                      <th class="txtalignr">
                                        <div>CALCULATED</div>
                                        Tax
                                      </th>
                                      <th class="txtalignr">variance </th>
                                      <th class="txtalignr"></th>
                                    </tr>
                                    <tr>
                                      <td>
                                        <div class="form-group">
                                          <select class="form-control" name="bulkcomp" [(ngModel)]="bulkinfo.company_id">
                                            <option value="" selected> Select </option>
                                            <option *ngFor="let company of companies.companylist" value="{{company.companyid}}">{{
                                              company.companyname }}</option>
                                          </select>
                                          <span style="color:red" *ngIf="!bulkinfo.company_id && bulkinfo.submit == true">Required</span>
                                        </div>
                                      </td>
                                      <td>
                                        <div class="form-group">
                                          <select class="form-control" name="bulkcost" [(ngModel)]="bulkinfo.cost_center_id">
                                            <option value="" selected> Select </option>
                                            <option *ngFor="let costcenter of costCenter" value="{{costcenter.cost_center_id}}">{{costcenter.cost_center_name}}</option>
                                            <!-- <option *ngFor="let costcenter of costCenter.costcenterslist" value="{{costcenter.costcenterid}}" >{{costcenter.costcentername}}</option> -->
                                          </select>
                                          <!-- <span style="color:red" *ngIf="!bulkinfo.cost_center_id && bulkinfo.submit == true" >Required</span> -->
                                        </div>
                                      </td>
                                      <td>
                                        <div class="form-group">
                                          <select class="form-control" name="bulkpur" [(ngModel)]="bulkinfo.purpose_id">
                                            <option value="" selected>Select</option>
                                            <option *ngFor="let purpose of purpose" value="{{purpose.purpose_id}}">{{purpose.purpose_desc}}</option>
                                            <!-- <option *ngFor="let purpose of purpose.purposecodeslist" value="{{purpose.purposecodeid}}" >{{purpose.purposedesc}}</option> -->
                                          </select>
                                          <!-- <span style="color:red" *ngIf="!bulkinfo.purpose_id && bulkinfo.submit == true" >Required</span> -->
                                        </div>
                                      </td>
                                      <td>
                                        <div class="form-group" style="min-width:80px"><input type="number" name="bulkpe"
                                            class="wadjust" style="width:62px;border:1px solid #CCCCCC" [ngStyle]="{'background-color': (i == 0) ? '#eee' :'white'}"
                                            [readonly]="i == 0" [ngModel]="bulkinfo.allocated_percentage" min="0" max="100"
                                            (keyup)="onchangebulkpercent($event, bulkAllocation, i)"><span style="padding-left:3px">%</span></div>
                                        <span style="color:red" *ngIf="!bulkinfo.allocated_percentage && bulkinfo.submit == true">Required</span>
                                      </td>
                                      <td>
                                        <div class="form-group" style="height: 28px;">
                                          <select [(ngModel)]="bulkinfo.accrual_method" name="bulkadd" [(ngModel)]="bulkinfo.accrual_method">
                                            <!-- <option value=""  selected>Select</option> -->
                                            <option value="DISTRIBUTED" selected>DISTRIBUTED</option>
                                            <option value="EXCLUDE STATE">EXCLUDE STATE</option>
                                          </select>
                                          <span style="color:red" *ngIf="!bulkinfo.accrual_method && bulkinfo.submit == true">Required</span>
                                        </div>
                                      </td>
                                      <td class="txtalignr">-</td>
                                      <td class="txtalignr">-</td>
                                      <td class="txtalignr">-</td>
                                      <td class="txtalignr">-</td>
                                      <td class="txtalignr">
                                        <div class="iconinsidetable"> <span class="icon-delete"></span> </div>
                                      </td>
                                    </tr>
                                  </table>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-xs-12 col-md-4">
                                  <div class="accordion-group cityacc">
                                    <div class="accordion-heading"> <a class="accordion-toggle collapsed" data-toggle="collapse"
                                        href="#collapse_3"> Add a location </a> </div>
                                    <div id="collapse_3" class="accordion-body collapse">
                                      <div class="accordion-inner">
                                        <div class="col-xs-12">
                                          <div class="row">
                                            <h2 class="companylocationHeading">Enter this company's Location</h2>
                                            <div class="table_tab_container">
                                              <ul class="nav nav-tabs">
                                                <li class="active"><a data-toggle="tab" href="#code11">Location Address</a></li>
                                              </ul>
                                              <div class="tab-content">
                                                <div id="code11" class="tab-pane fade in active">
                                                  <div class="form-group">
                                                    <label>Location code</label>
                                                    <input type="text" name="Addressline1" class="form-control addmargin_new"
                                                      [(ngModel)]="bulkinfo.dest_location_code">
                                                  </div>
                                                  <div class="form-group">
                                                    <label>Country</label>
                                                    <input type="text" name="country" class="form-control addmargin_new"
                                                      [(ngModel)]="bulkinfo.dest_country">
                                                  </div>
                                                  <div class="form-group">
                                                    <label>Address</label>
                                                    <input type="text" name="Addressline1" class="form-control addmargin_new"
                                                      [(ngModel)]="bulkinfo.dest_address">
                                                  </div>
                                                  <div class="col-xs-12 addmargin_new">
                                                    <div class="row mright0">
                                                      <div class="col-xs-12 col-md-6">
                                                        <div class="row mright0">
                                                          <div class="form-group ">
                                                            <label>City</label>
                                                            <input type="text" name="cityname" class="form-control"
                                                              [(ngModel)]="bulkinfo.dest_city">
                                                          </div>
                                                        </div>
                                                      </div>
                                                      <div class="col-xs-12 col-md-6">
                                                        <div class="row">
                                                          <div class="col-xs-4">
                                                            <div class="row">
                                                              <div class="form-group">
                                                                <label>State</label>
                                                                <input type="text" name="statename" class="form-control"
                                                                  style="padding: 3px;" [(ngModel)]="bulkinfo.dest_region">
                                                              </div>
                                                            </div>
                                                          </div>
                                                          <div class="col-xs-8">
                                                            <div class="row mleft0">
                                                              <div class="form-group">
                                                                <label>Zip Code</label>
                                                                <input type="tel" name="Zipcode" class="form-control"
                                                                  [(ngModel)]="bulkinfo.dest_postal_code">
                                                              </div>
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-xs-12 col-md-3">
                                  <div class="form-group">
                                    <ng2-completer id="allocation.item_allocation_id" [datasource]="dataService"
                                      [minSearchLength]="0" (selected)="onItemSelect($event, bulkinfo)"></ng2-completer>
                                  </div>
                                </div>
                                <div class="clearfix"></div>
                              </div>
                              <div class="col-xs-12">
                                <p class="addcity" (click)="addAnotherBulkSec()"><span class="icon-add" style="font-size: 110%;color: #2b769b;"></span>Add
                                  Another</p>
                              </div>
                              <div class="col-xs-12">
                                <div class="citycollec"> </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="modal-footer">
                          <div class="col-xs-12">
                            <div class="btn_container"> <a href="javascript:void(0)" (click)="askbulkAllocate()" class="normal-btn gray-btn blue-btn"
                                rel="noreferrer noopener">Save</a>
                              <a href="javascript:void(0)" class="normal-btn blue-btn cancel-btn" data-dismiss="modal"
                                rel="noreferrer noopener">Cancel</a> </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="exporttransactionmodal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <h4 class="modal-title"><span class="icon-download"></span><span>Select the CSV export type
                              for these transactions</span></h4>
                        </div>
                        <div class="modal-body">
                          <div class="form-group">
                            <label class="container_export_radio">Line level transaction details
                              <input type="radio" checked="checked" name="exportopt" [(ngModel)]="selectedExpOpt" value="linelevel"
                                id="transactiondetails" (click)="enableFields(false)">
                              <span class="checkmark_radio"></span>
                            </label>
                            <label class="container_export_radio">Configurable aggragated transaction totals
                              <input type="radio" name="exportopt" [(ngModel)]="selectedExpOpt" id="transactiontotals"
                                value="agg" (click)="enableFields(true)">
                              <span class="checkmark_radio"></span>
                            </label>
                            
                                <input style="margin: 4px 4px 0;" type="checkbox" name="exportopt" [(ngModel)]="i_is_balancing" id="i_is_balancing">
                                <label style="margin-left: 12px;">INCLUDE BALANCING ENTRIES FOR MODIFIED LINE ITEMS.
                              </label>
                          </div>
                          <div class="select_plugin_container">
                            <div class="select_plug_title">
                              SELECT AND ORDER COLUMN HEADERS
                            </div>
                            <ul class="movabelist" id="movabelist">
                              <li data-value="company_id">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Company
                                  <input type="checkbox" class="sortcheckbox" id="colcompany">
                                  <span class="checkmark_export" data-ref="colcompany"></span>
                                </label>
                              </li>
                              <li data-value="destination_address_id">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Location
                                  <input type="checkbox" class="sortcheckbox" id="collocation">
                                  <span class="checkmark_export" data-ref="collocation"></span>
                                </label>
                              </li>
                              <li data-value="costcenter_id">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Cost center
                                  <input type="checkbox" class="sortcheckbox" id="colcostcen">
                                  <span class="checkmark_export" data-ref="colcostcen"></span>
                                </label>
                              </li>
                              <li data-value="purpose_id">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Purpose
                                  <input type="checkbox" class="sortcheckbox" id="colpurpose">
                                  <span class="checkmark_export" data-ref="colpurpose"></span>
                                </label>
                              </li>
                              <li data-value="rev_account">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Revenur account
                                  <input type="checkbox" class="sortcheckbox" id="colrevacc">
                                  <span class="checkmark_export" data-ref="colrevacc"></span>
                                </label>
                              </li>
                              <li data-value="ref1">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Custom reference field 1
                                  <input type="checkbox" class="sortcheckbox" id="colref">
                                  <span class="checkmark_export" data-ref="colref"></span>
                                </label>
                              </li>
                              <li data-value="ref2">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Custom reference field 2
                                  <input type="checkbox" class="sortcheckbox" id="colref2">
                                  <span class="checkmark_export" data-ref="colref2"></span>
                                </label>
                              </li>
                              <li data-value="vendor_id">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Vendor code
                                  <input type="checkbox" class="sortcheckbox" id="colcencode">
                                  <span class="checkmark_export" data-ref="colcencode"></span>
                                </label>
                              </li>
                              <li data-value="document_id">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Document code
                                  <input type="checkbox" class="sortcheckbox" id="coldoccode">
                                  <span class="checkmark_export" data-ref="coldoccode"></span>
                                </label>
                              </li>
                              <li data-value="purchasing_order_number">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Purchase order
                                  <input type="checkbox" class="sortcheckbox" id="colpurorder">
                                  <span class="checkmark_export" data-ref="colpuragent"></span>
                                </label>
                              </li>
                              <li data-value="purchasing_agent_code">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Purchasing agent
                                  <input type="checkbox" class="sortcheckbox" id="colpuragent">
                                  <span class="checkmark_export" data-ref="colpuragent"></span>
                                </label>
                              </li>
                              <li data-value="import_filename">
                                <div class="sortbox_export">
                                  <div class="move_top">
                                    <span class="icon-sort-up-arrow"></span>
                                  </div>
                                  <div class="move_down">
                                    <span class="icon-sort-down_arrow"></span>
                                  </div>
                                </div>
                                <label class="container_export_check">Import type
                                  <input type="checkbox" class="sortcheckbox" id="colimptype">
                                  <span class="checkmark_export" data-ref="colimptype"></span>
                                </label>
                              </li>
                            </ul>
                            <div class="disable_fields"></div>
                          </div>

                          <div class="form-group" style="margin-bottom: 0;">
                            <label for="comments" class="export_comment_label">Comments</label>
                            <textarea name="comments" id="expcomments" class="export_comment_area"></textarea>
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container"> <a href="javascript:void(0)" class="normal-btn blue-btn" rel="noreferrer noopener"
                              (click)="download()">Download</a> <a href="#!" class="normal-btn blue-btn cancel-btn"
                              data-dismiss="modal" (click)="cancelExport()" rel="noreferrer noopener">Cancel</a> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--  Modal Starts -->
                  <div id="deleteallocationModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                      <!-- Modal content-->
                      <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <div class="modal-header">
                          <div style="float:left;width: 32px;"><span class="icon-delete" style="float:none;"></span></div>
                          <div style="float:left">
                            <h4 class="modal-title" style="padding: 7px 0;"><span>Are you sure you want to delete?</span></h4>
                          </div>
                        </div>
                        <div class="modal-footer">
                          <div class="btn_container">
                            <div class="col-xs-4">
                              <div class="row button_box_secfilter">
                                <div class="row">
                                  <div class="col-xs-6"> <a href="javascript:void(0)" (click)="okDeleteRow()" class="normal-btn gray-btn blue-btn"
                                      rel="noreferrer noopener">Save</a> </div>
                                  <div class="col-xs-6"> <a href="javascript:void(0)" class="normal-btn blue-btn Reset-btn"
                                      rel="noreferrer noopener" data-dismiss="modal">Cancel</a> </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- Column Modal End -->
                  <style>
                    .ngx-pagination {
                      padding: 0px !important;
                    }
                  </style>